# 과학탐구실험 수행평가3 완전 가이드

## 📋 개요

과학탐구실험2 수행평가3(suhaeng3)은 보고서를 작성하고 ZIP 파일로 제출하는 웹 애플리케이션입니다. 업로드 우선 방식으로 Microsoft OneDrive에 자동 업로드 후 다운로드를 안내합니다.

## 🎯 핵심 특징

### ✨ 주요 기능
- **탭 기반 편집**: 체계적인 보고서 작성 인터페이스
- **실시간 미리보기**: 작성 내용 즉시 확인 가능
- **자동 업로드**: ZIP 생성 후 OneDrive 자동 업로드
- **환경별 다운로드**: 브라우저/디바이스에 맞는 다운로드 방식
- **KST 타임스탬프**: 한국 표준시 기준 파일명 생성

### 🔧 기술적 특징
- **업로드 우선**: OneDrive 업로드 성공 후 다운로드 경로 제공
- **인앱 브라우저 대응**: Naver/Kakao 등에서 서버 첨부 응답 다운로드
- **iOS Safari 최적화**: 공유 시트 기반 "파일에 저장" 안내
- **용량 제한**: 클라이언트 ZIP 크기 8MB 제한
- **일관된 스타일**: 모든 출력물이 동일한 템플릿 사용

## 🚀 사용 방법

### 1단계: 보고서 작성
1. **웹사이트 접속**
   - Production: `https://physichu.netlify.app/science-experiments/suhaeng3/`
   - Testing: `https://test-physichu.netlify.app/science-experiments/suhaeng3-test/`

2. **학생 정보 입력**
   - 학년, 반, 번호, 이름 입력
   - 정보는 자동으로 저장됨

3. **보고서 내용 작성**
   - 각 탭별로 체계적으로 내용 작성
   - 참고문헌 및 출처 정보 입력
   - 실시간 미리보기로 작성 내용 확인

### 2단계: 제출하기
1. **"ZIP 다운로드 및 제출" 버튼 클릭**
2. **업로드 진행**
   - 진행률 표시와 함께 서버 업로드 진행
   - 업로드 경로: `/과제제출/{subject}/{activity}/{section}/{studentId}/`

3. **다운로드 안내**
   - **일반 브라우저**: ZIP 파일이 로컬로 다운로드
   - **인앱 브라우저**: "서버에서 다운로드" 버튼으로 첨부 응답 다운로드
   - **iOS Safari**: 공유 시트를 통한 "파일에 저장" 안내

### 3단계: 재시도 (필요시)
- 업로드 실패 시 "재시도" 버튼으로 마지막 ZIP 재업로드 가능

## 📱 환경별 호환성

### 🖥️ 데스크톱 브라우저
- **Chrome, Firefox, Edge**: 모든 기능 정상 작동
- **Safari**: 모든 기능 정상 작동
- **다운로드**: 직접 다운로드

### 📱 모바일 브라우저
- **Android Chrome**: 모든 기능 정상 작동
- **iOS Safari**: 공유 시트 기반 저장
- **Samsung Browser**: 서버 다운로드 모달 표시

### 📱 인앱 브라우저
- **Naver, KakaoTalk**: 서버 첨부 응답 다운로드
- **Instagram, Facebook**: 서버 첨부 응답 다운로드
- **PDF 인쇄 버튼**: 자동 숨김 처리

## 🔧 고급 기능

### 교사키 시스템
- **조기 접근**: `?key=TEACHER_KEY` 파라미터로 시간 제한 우회
- **관리자 기능**: 학생 제출물 조기 확인 가능

### 파일 관리
- **파일명 규칙**: `{학번}_{이름}_{프로젝트명}_{KST타임스탬프}.zip`
- **용량 제한**: 8MB 초과 시 생성/업로드 차단
- **자동 저장**: 브라우저 로컬 스토리지에 자동 저장

### 오프라인 지원
- **PWA 기능**: Service Worker를 통한 오프라인 지원
- **로컬 저장**: 작성 중인 내용 자동 저장

## 🛠️ 문제 해결

### 일반적인 문제
1. **업로드 실패**
   - 네트워크 연결 확인
   - 파일 크기 8MB 이하 확인
   - 재시도 버튼 사용

2. **다운로드 실패**
   - 브라우저 설정 확인
   - 팝업 차단 해제
   - 서버 다운로드 모달 사용

3. **저장 실패 (iOS)**
   - 공유 시트에서 "파일에 저장" 선택
   - iCloud Drive 또는 내 iPhone 선택

### 기술적 문제
- **API 엔드포인트**: `/.netlify/functions/submit`, `/.netlify/functions/download`
- **환경 변수**: Microsoft Graph API 설정 확인
- **CORS 문제**: 프록시 서버를 통한 우회 가능

## 📚 관련 문서

### 사용자 문서
- [테스트 가이드](suhaeng3-test-guide.md)
- [교사키 사용법](teacher-key-guide.md)
- [문제 해결 가이드](troubleshooting/)

### 개발자 문서
- [API 문서](../project/api.md)
- [배포 가이드](../project/deployment.md)
- [설정 가이드](../project/configuration.md)

## 🔄 최신 업데이트

### v1.3.0 (2025-10-15)
- ✅ Playwright 테스트 프레임워크 추가
- ✅ 물리학II 웹앱 테스트 완료
- ✅ 환경별 호환성 검증 완료
- ✅ 문서 통합 및 최적화

### v1.2.0 (2025-08-30)
- ✅ 업로드 우선 흐름으로 변경
- ✅ 인앱 브라우저 대응
- ✅ iOS Safari 전용 UX 개선
- ✅ KST 기준 타임스탬프 생성

---

**마지막 업데이트**: 2025-10-15  
**버전**: 1.3.0  
**상태**: 운영 중


