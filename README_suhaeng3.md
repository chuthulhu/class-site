# suhaeng3 자동 제출 기능

## 개요

`suhaeng3/index.html`은 학생들이 과학 탐구 프로젝트를 작성하고 ZIP 파일로 제출할 수 있는 웹 애플리케이션입니다. 최근 업데이트로 ZIP 생성과 동시에 Microsoft OneDrive에 자동으로 업로드하는 기능이 추가되었습니다.

## 주요 기능

### 📝 프로젝트 작성
- 탭 기반 인터페이스로 체계적인 프로젝트 작성
- 학생 정보 입력 (학년, 반, 번호, 이름)
- 출처 관리 및 참고문헌 자동 생성
- 실시간 미리보기

### 📦 ZIP 생성 및 다운로드
- HTML 보고서를 ZIP 파일로 압축
- 로컬 다운로드 자동 시작
- 파일명 규칙: `{학번}_{이름}_{프로젝트명}_{타임스탬프}.zip`

### ☁️ OneDrive 자동 업로드
- ZIP 생성과 동시에 OneDrive에 업로드
- 폴더 구조: `/과제제출/수학1/{반}/{학번}/`
- 실시간 업로드 진행 상태 표시
- 자동 재시도 기능 (최대 3회)

## 사용 방법

### 1. 프로젝트 작성
1. `suhaeng3/index.html` 접속
2. 학생 정보 입력 (학년, 반, 번호, 이름)
3. 각 탭에서 프로젝트 내용 작성
4. 출처 정보 추가 (선택사항)

### 2. 제출하기
1. "ZIP 다운로드 및 제출" 버튼 클릭
2. 자동으로 ZIP 파일 생성 및 로컬 다운로드 시작
3. OneDrive 업로드 진행 상태 확인
4. 성공 시 확인 메시지 및 파일 경로 표시

### 3. 재시도 (필요시)
- 업로드 실패 시 "재시도" 버튼이 나타남
- 버튼을 클릭하여 다시 업로드 시도
- 최대 3회까지 자동 재시도

## 기술 사양

### 지원 환경
- **브라우저**: Chrome, Firefox, Safari, Edge (최신 버전)
- **해상도**: 1024x768 이상 권장
- **네트워크**: 안정적인 인터넷 연결 필요

### 파일 제한
- **최대 용량**: 8MB (ZIP 파일 기준)
- **파일 형식**: ZIP (application/zip)
- **파일명 길이**: 255자 이내

### 폴더 구조
```
OneDrive/
└── 과제제출/
    └── 수학1/           # 과목명
        └── 101/         # 반 (1학년01반)
            └── 10101_홍길동_프로젝트_20250101_120000.zip  # 학번_이름_프로젝트명_타임스탬프.zip
```

## 문제 해결

### 자주 발생하는 문제

#### Q: "ZIP 용량이 8MB를 초과합니다"
**A**: 프로젝트 내용을 간소화하거나 불필요한 이미지를 제거하세요.
- 텍스트 위주로 작성
- 이미지 압축 또는 제거
- 불필요한 스타일 제거

#### Q: "제출 실패: 업로드 실패"
**A**:
1. 인터넷 연결 확인
2. 잠시 기다린 후 재시도 버튼 클릭
3. 문제가 지속되면 담당자에게 문의

#### Q: "제출 실패: 인증 실패"
**A**: 시스템 설정 문제일 수 있습니다. 담당자에게 문의하세요.

### 재시도 기능
- 자동 재시도: 네트워크 오류 시 최대 3회 자동 재시도
- 수동 재시도: "재시도" 버튼을 클릭하여 수동으로 재시도
- 재시도 간격: 1초, 2초, 3초 (exponential backoff)

## 개발자 정보

### API 엔드포인트
```
POST /.netlify/functions/submit
```

### 요청 형식
```json
{
  "studentId": "10101",
  "subject": "수학1",
  "section": "101",
  "files": [{
    "filename": "10101_홍길동_프로젝트_20250101_120000.zip",
    "contentBase64": "<base64-encoded-zip>",
    "mime": "application/zip"
  }]
}
```

### 응답 형식
```json
{
  "ok": true,
  "studentId": "10101",
  "subject": "수학1",
  "section": "101",
  "submittedAt": "2025-01-01T12:00:00.000Z",
  "files": [{
    "name": "10101_홍길동_프로젝트_20250101_120000.zip",
    "size": 1024000,
    "webUrl": "https://onedrive.live.com/...",
    "chunked": false
  }]
}
```

## 버전 히스토리

### v2.1.0 (2025년 8월 29일)
- ✨ OneDrive 자동 업로드 기능 추가
- 🔄 재시도 로직 강화 (최대 3회, exponential backoff)
- 📁 폴더 구조 최적화
- 🎯 submit.js와의 호환성 개선
- 📊 상세한 진행 상태 표시

### v2.0.0 (이전 버전)
- 📝 탭 기반 프로젝트 작성 인터페이스
- 📦 ZIP 파일 생성 및 다운로드
- 💾 로컬 데이터 자동 저장
- 📄 PDF 인쇄 기능

## 지원 및 문의

문제가 발생하거나 추가 기능이 필요한 경우:
- 담당자: 개발팀
- 이메일: support@example.com
- 문서: [프로젝트 메인 문서](../PROJECT.md)

---

**문서 버전**: 1.0
**최종 업데이트**: 2025년 8월 29일
