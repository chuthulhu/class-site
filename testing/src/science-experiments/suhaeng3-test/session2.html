<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>첫걸음, 마지막 걸음 프로젝트 - 2차시</title>
    <meta name="submission-subject" content="과학탐구실험2">
    <meta name="submission-activity" content="수행3_2차시">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&family=Nanum+Myeongjo:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Noto Sans KR','Inter',sans-serif; background-color:#f3f4f6; }
        .tab-button-group { display:flex; flex-wrap:wrap; gap:0.5rem; background-color:#e5e7eb; padding:0.5rem; border-radius:0.75rem; }
    .tab-button { flex-grow:1; text-align:center; padding:0.75rem 0.5rem; border-radius:0.625rem; font-weight:600; color:#374151; cursor:pointer; transition:all .2s ease; border:1px solid #d1d5db; background-color:#ffffff; box-shadow:0 1px 2px rgba(0,0,0,.04); }
    .tab-button:hover { background-color:#f9fafb; color:#111827; border-color:#c7d2fe; }
    .tab-button.active { background-color:#ffffff; color:#4f46e5; border-color:#4f46e5; box-shadow:0 4px 6px -1px rgba(0,0,0,.1),0 2px 4px -1px rgba(0,0,0,.06); }
        .tab-content { display:none; }
        .tab-content.active { display:block; }
        .report-page { background-color:#fff; padding:2.5cm 2cm; box-shadow:0 10px 15px -3px rgba(0,0,0,.1), 0 4px 6px -2px rgba(0,0,0,.05); color:#1f2937; }
        .report-main-title { font-family:'Noto Sans KR',sans-serif; font-size:1.875rem; font-weight:700; text-align:center; margin-bottom:1rem; border-bottom:2px solid #111827; padding-bottom:1rem; }
        .report-section-title { font-family:'Noto Sans KR',sans-serif; font-size:1.5rem; font-weight:700; color:#111827; margin-top:2.5rem; margin-bottom:1rem; padding-bottom:0.5rem; border-bottom:1px solid #d1d5db; }
    .preview-text { white-space:pre-wrap; word-break:break-word; min-height:2.5em; line-height:1.8; color:#374151; font-family:'Nanum Myeongjo',serif; }
    .preview-text a { color:#2563eb; text-decoration:underline; }
        .preview-placeholder { color:#9ca3af; font-style:italic; }
        .tip-card { background: linear-gradient(135deg,#f5f3ff,#eef2ff); border-left:4px solid #6366f1; padding:1rem; border-radius:0.5rem; }
        .accordion-header button.open { background-color:#eef2ff; color:#4338ca; }
        .accordion-content { transition:max-height .3s ease-out, padding .3s ease-out; max-height:0; overflow:hidden; }
        .accordion-content.open { max-height:1500px; }

        /* Responsive typography & controls */
        html { font-size:16px; }
        @media (min-width: 640px) { html { font-size:16.5px; } }
        @media (min-width: 768px) { html { font-size:17px; } }
        @media (min-width: 1024px) { html { font-size:17.5px; } }
        @media (min-width: 1280px) { html { font-size:18px; } }

        .tab-button { font-size:.95rem; padding:.85rem .5rem; }
        @media (min-width: 640px) { .tab-button { font-size:1rem; } }
        @media (min-width: 1024px) { .tab-button { font-size:1.05rem; } }

        #download_zip_btn,
        #print_btn,
        #preview_newtab_btn,
        #retry_upload_btn,
        #add_source_btn,
        #clear_inputs_btn {
            font-size:.95rem; padding:.6rem 1rem;
        }
        @media (min-width: 640px) {
            #download_zip_btn,
            #print_btn,
            #preview_newtab_btn,
            #retry_upload_btn,
            #add_source_btn,
            #clear_inputs_btn { font-size:1rem; padding:.7rem 1.1rem; }
        }
        @media (min-width: 1024px) {
            #download_zip_btn,
            #print_btn,
            #preview_newtab_btn,
            #retry_upload_btn,
            #add_source_btn,
            #clear_inputs_btn { font-size:1.0625rem; padding:.8rem 1.2rem; }
        }

        label { font-size:.95rem; }
        textarea, input[type="text"], input[type="number"], select { font-size:1rem; }
        @media (min-width: 1024px) {
            textarea, input[type="text"], input[type="number"], select { font-size:1.0625rem; }
        }
        @page { size:A4 portrait; margin:2cm; }
        @media print { body *{ visibility:hidden } .printable-area, .printable-area *{ visibility:visible } .printable-area{ position:absolute; left:0; top:0; width:100%; padding:0; margin:0; box-shadow:none; border:none } .no-print{ display:none } }
    </style>
    <link rel="icon" href="data:,">
</head>
<body class="p-4 sm:p-8">
    <div class="max-w-5xl mx-auto">
        <header class="text-center bg-white p-8 rounded-xl shadow-lg mb-6 no-print">
            <h1 class="text-3xl sm:text-4xl font-bold text-gray-800">첫걸음, 마지막 걸음 프로젝트 - 2차시</h1>
            <p class="text-lg text-gray-600 mt-2">3가지 지렛대 아이디어 + 기대효과 (부분 제출)</p>
            <div class="mt-4">
                <a href="./index.html" class="text-indigo-600 hover:underline">← 활동 허브로 돌아가기</a>
            </div>
        </header>

        <div class="bg-white p-6 sm:p-8 rounded-lg shadow-md mb-6 no-print">
            <div class="flex flex-col sm:flex-row justify-between items-center gap-6">
                <div class="flex items-center space-x-2 flex-wrap justify-center">
                    <input type="number" id="student_grade" min="1" max="3" step="1" inputmode="numeric" class="w-20 p-2 border border-gray-300 rounded-md text-center" placeholder="학년">
                    <label for="student_grade" class="font-semibold">학년</label>
                    <input type="number" id="student_class" min="1" max="20" step="1" inputmode="numeric" class="w-20 p-2 border border-gray-300 rounded-md text-center" placeholder="반">
                    <label for="student_class" class="font-semibold">반</label>
                    <input type="number" id="student_number" min="1" max="40" step="1" inputmode="numeric" class="w-20 p-2 border border-gray-300 rounded-md text-center" placeholder="번호">
                    <label for="student_number" class="font-semibold">번</label>
                    <input type="text" id="student_name" class="w-32 p-2 border border-gray-300 rounded-md" placeholder="이름">
                </div>
            </div>
        </div>

        <div class="mb-8 no-print">
            <div class="tab-button-group" aria-label="탭 메뉴">
                <button class="tab-button active" data-tab="guide2">활동 안내</button>
                <button class="tab-button" data-tab="tab4">활동지 작성</button>
                <button class="tab-button" data-tab="tab5">미리보기 및 제출</button>
            </div>
        </div>
            <div id="guide2" class="tab-content active">
                <div class="bg-white p-6 sm:p-8 rounded-lg shadow-md space-y-8">
                    <section>
                        <h2 class="text-2xl font-bold text-gray-800 mb-2">2차시 목표</h2>
                        <div class="tip-card text-gray-700">
                            <ul class="list-disc list-inside text-sm space-y-1">
                                <li>3가지 지렛대(공간·혜택·협력) 관점으로 아이디어 구체화</li>
                                <li>기대효과를 구체적 장면으로 서술</li>
                            </ul>
                        </div>
                    </section>
                    <section>
                        <h2 class="text-2xl font-bold text-gray-800 mb-2">3가지 지렛대 예시</h2>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div class="p-4 bg-gray-50 rounded-lg border"><h3 class="font-bold">공간</h3><p class="text-sm text-gray-600 mt-1">비가림, 조명, CCTV, 충전 등</p></div>
                            <div class="p-4 bg-gray-50 rounded-lg border"><h3 class="font-bold">혜택</h3><p class="text-sm text-gray-600 mt-1">환승 포인트, 주차 할인, 앱 연동</p></div>
                            <div class="p-4 bg-gray-50 rounded-lg border"><h3 class="font-bold">협력</h3><p class="text-sm text-gray-600 mt-1">지자체-기업-지역상권 협력</p></div>
                        </div>
                    </section>
                    <!-- Guide items 3~4 from hub -->
                    <section>
                        <div class="accordion-item border-t pt-4">
                            <div class="accordion-header"><button class="w-full text-left p-4 rounded-lg font-semibold text-lg text-gray-800 hover:bg-gray-100 flex justify-between items-center"><span>💡 3. '3가지 지렛대' 아이디어 내기</span><svg class="w-6 h-6 transform transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button></div>
                            <div class="accordion-content"><div class="p-4 text-gray-600 space-y-4">
                                <p>하나의 좋은 아이디어는 여러 요소가 균형을 이룰 때 나옵니다. 우리는 문제를 세 가지 관점, '지렛대'로 나누어 생각해 볼 거예요.</p>
                                <ul class="list-disc list-inside space-y-2 bg-gray-50 p-4 rounded-md border">
                                    <li><strong>🏛️ 공간 (물리적 인프라):</strong> 허브를 안전하고 편리하게 만드는 '하드웨어'입니다. 디자인, 시설, 안전장치 등이 여기에 해당해요.</li>
                                    <li><strong>💡 혜택 (디지털/정책):</strong> 사람들이 허브를 쓰고 싶게 만드는 '동기 부여'입니다. 요금 할인, 포인트, 앱 연동 같은 '소프트웨어' 전략이 필요해요.</li>
                                    <li><strong>🤝 협력 (운영 모델):</strong> 이 좋은 아이디어를 지속 가능하게 만드는 '시스템'입니다. 누가 운영하고, 비용은 어떻게 마련하며, 누구와 협력할지 고민해야 합니다.</li>
                                </ul>
                                <p class="font-semibold text-gray-800">이 세 가지를 모두 고려해야 현실적이고 성공적인 제안을 할 수 있습니다.</p>
                            </div></div>
                        </div>
                        <div class="accordion-item border-t pt-4">
                            <div class="accordion-header"><button class="w-full text-left p-4 rounded-lg font-semibold text-lg text-gray-800 hover:bg-gray-100 flex justify-between items-center"><span>📈 4. 기대 효과, 어떻게 쓸까?</span><svg class="w-6 h-6 transform transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button></div>
                            <div class="accordion-content"><div class="p-4 text-gray-600 space-y-3">
                                <p>제안한 아이디어가 실행되었을 때, '누구에게', '어떤' 긍정적인 변화가 생길지 구체적인 장면을 상상해서 그리는 단계입니다.</p>
                                <div class="tip-card p-4 rounded-lg">
                                    <h4 class="font-bold text-indigo-800">생각을 넓히는 질문</h4>
                                    <ul class="list-disc list-inside mt-2 text-sm">
                                        <li>여러분의 아이디어가 실현되면 누가 가장 좋아할까요?</li>
                                        <li>도시의 모습은 어떻게 바뀔까요? (예: 깨끗해진다, 활기차진다 등)</li>
                                        <li>사람들의 생활은 어떻게 더 편리해질까요?</li>
                                    </ul>
                                    <div class="mt-4 p-3 rounded-lg bg-indigo-50 border border-indigo-200">
                                        <h5 class="font-bold text-indigo-800 text-sm">✍️ 작성 예시</h5>
                                        <p class="text-sm text-indigo-900 mt-1">
                                            "스마트 모빌리티 허브가 설치되면, <strong>(누구에게)</strong> S-BRT로 통학하는 학생들은 <strong>(어떤 변화)</strong> 정류장까지 킥보드를 타고 와 안전하게 주차하고 버스로 편리하게 환승할 수 있게 될 것이다. 또한, 보행자들은 아무렇게나 방치된 킥보드가 사라져 쾌적하고 안전한 인도를 걸을 수 있게 된다."
                                        </p>
                                    </div>
                                </div>
                            </div></div>
                        </div>
                    </section>
                </div>
            </div>

        <main>
            <div id="tab4" class="tab-content active">
                <div class="bg-white p-6 sm:p-10 rounded-lg shadow-md space-y-8">
                    <header class="text-center mb-4">
                        <h2 class="text-2xl font-bold text-gray-800">2차시 활동지</h2>
                        <p class="text-gray-600">3가지 지렛대 아이디어와 기대효과를 작성하세요.</p>
                    </header>
                    <div class="flex justify-end -mt-2">
                        <button id="clear_inputs_btn" class="bg-red-50 text-red-700 font-semibold py-2 px-4 rounded-lg border border-red-200 hover:bg-red-100 transition text-sm">🗑️ 입력 내용 삭제</button>
                    </div>
                    <section>
                        <h3 class="text-xl font-bold text-indigo-700 mb-4">1. 스마트 모빌리티 허브 아이디어 (3가지 지렛대)</h3>
                        <div class="text-sm bg-blue-50 border border-blue-200 text-blue-900 rounded-md p-3 mb-2">
                            <div class="font-semibold mb-1">평가 기준</div>
                            <ul class="list-disc list-inside space-y-0.5">
                                <li>제시된 3가지 영역(공간·혜택·협력)에서 각 아이디어를 제시</li>
                                <li>각 아이디어에 대해 <strong>구체적인 근거</strong>를 들어 <strong>실행 가능</strong>한 수준으로 서술</li>
                            </ul>
                        </div>
                        <div class="space-y-6">
                            <div>
                                <label for="field_idea_infra" class="font-semibold text-gray-700 block mb-2">🏛️ 물리적 인프라 (공간)</label>
                                <textarea id="field_idea_infra" rows="5" class="w-full p-3 border border-gray-300 rounded-md" placeholder="예시: 밤에도 안전하게 이용할 수 있도록 허브에 CCTV와 밝은 LED 조명을 설치합니다. 이는 창원시에서 범죄 예방 디자인 예산을 활용해 설치할 수 있습니다."></textarea>
                            </div>
                            <div>
                                <label for="field_idea_policy" class="font-semibold text-gray-700 block mb-2">💡 디지털/정책 (혜택)</label>
                                <textarea id="field_idea_policy" rows="5" class="w-full p-3 border border-gray-300 rounded-md" placeholder="예시: 허브에 PM을 주차하고 S-BRT로 환승하면, 다음 PM 이용 시 쓸 수 있는 100원 할인 쿠폰을 지급합니다. 이는 PM 운영사와 창원시가 협력하여 앱 시스템을 개발해 구현할 수 있습니다."></textarea>
                            </div>
                            <div>
                                <label for="field_idea_operation" class="font-semibold text-gray-700 block mb-2">🤝 운영 모델 (협력)</label>
                                <textarea id="field_idea_operation" rows="5" class="w-full p-3 border border-gray-300 rounded-md" placeholder="예시: 허브 운영 및 관리 비용을 창원시와 PM 운영사가 5:5로 분담합니다. 주변 상점은 허브 이용자에게 할인 쿠폰을 제공하는 방식으로 참여할 수 있습니다."></textarea>
                            </div>
                        </div>
                    </section>
                    <section>
                        <h3 class="text-xl font-bold text-indigo-700 mb-4">2. 기대 효과</h3>
                        <div>
                            <div class="text-sm bg-blue-50 border border-blue-200 text-blue-900 rounded-md p-3 mb-2">
                                <div class="font-semibold mb-1">평가 기준</div>
                                <ul class="list-disc list-inside space-y-0.5">
                                    <li>해결방안과 기대효과를 <strong>직접적으로 연결</strong>하여 근거를 들어 서술</li>
                                    <li>기대효과로 인한 <strong>혜택의 대상</strong>을 명시</li>
                                </ul>
                            </div>
                            <label for="field_effects" class="font-semibold text-gray-700 block mb-2">아이디어 실현 시 기대되는 변화</label>
                            <textarea id="field_effects" rows="6" class="w-full p-3 border border-gray-300 rounded-md" placeholder="예시: 학생들은 S-BRT 정류장까지 킥보드로 편리하게 이동 후, 안전하게 주차하고 버스로 환승할 수 있게 됩니다. 또한, 보행자들은 인도에 방치된 킥보드가 사라져 안전하고 쾌적하게 걸을 수 있습니다."></textarea>
                        </div>
                    </section>
                    <section>
                        <h3 class="text-xl font-bold text-indigo-700 mb-4">3. 정보 출처</h3>
                        <div>
                            <div class="text-sm text-gray-600 mb-2">아이디어와 기대효과에 참고한 근거 자료가 있다면 출처를 기재하세요. (선택사항)</div>
                            <div id="sources_container" class="space-y-4"></div>
                            <button id="add_source_btn" class="mt-2 bg-gray-200 text-gray-700 font-semibold py-2 px-4 rounded-lg hover:bg-gray-300 transition text-sm">+ 출처 추가</button>
                        </div>
                    </section>
                </div>
            </div>

            <div id="tab5" class="tab-content">
                <div class="bg-white p-6 sm:p-8 rounded-lg shadow-md mb-6 no-print">
                    <div class="flex justify-center items-center gap-4 flex-wrap">
                        <button id="download_zip_btn" class="bg-green-500 text-white font-bold py-3 px-6 rounded-lg hover:bg-green-600 transition text-base">📦 ZIP으로 다운로드</button>
                        <button id="print_btn" class="bg-indigo-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-indigo-700 transition text-base">🖨️ PDF로 저장</button>
                        <button id="preview_newtab_btn" class="bg-gray-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-gray-700 transition text-base">👁️ 미리보기(새 탭)</button>
                        <button id="retry_upload_btn" class="hidden bg-yellow-500 text-white font-bold py-3 px-6 rounded-lg hover:bg-yellow-600 transition text-base">🔄 업로드 재시도</button>
                    </div>
                    <p class="text-center text-sm text-gray-600 mt-4" aria-live="polite" role="status"><span id="submit_status"></span></p>
                    <div id="progress_container" class="w-full max-w-xl mx-auto mt-3 hidden" aria-hidden="true">
                        <div class="w-full bg-gray-200 rounded-full h-3">
                            <div id="progress_bar" class="bg-indigo-600 h-3 rounded-full" style="width:0%"></div>
                        </div>
                        <p id="progress_text" class="text-center text-xs text-gray-600 mt-1"></p>
                    </div>
                </div>
                <div class="bg-gray-200 p-4 sm:p-8 rounded-lg">
                    <div class="printable-area report-page" id="report-content">
                        <h1 id="preview_main_title" class="report-main-title">스마트 모빌리티 허브 아이디어 제안서 (2차시)</h1>
                        <p class="text-right text-gray-600 mb-10" style="font-family: 'Noto Sans KR', sans-serif;">
                            <span id="preview_student_grade">1</span>학년 <span id="preview_student_class">0</span>반 <span id="preview_student_number">00</span>번 이름: <span id="preview_student_name">ㅇㅇㅇ</span>
                        </p>
                        <h2 class="report-section-title">III. 스마트 모빌리티 허브 아이디어</h2>
                        <h3 class="font-semibold mt-4 mb-2" style="font-family: 'Noto Sans KR', sans-serif;">가. 물리적 인프라 (공간)</h3>
                        <p class="preview-text" id="preview_idea_infra"><span class="preview-placeholder">내용을 입력하세요...</span></p>
                        <h3 class="font-semibold mt-4 mb-2" style="font-family: 'Noto Sans KR', sans-serif;">나. 디지털/정책 (혜택)</h3>
                        <p class="preview-text" id="preview_idea_policy"><span class="preview-placeholder">내용을 입력하세요...</span></p>
                        <h3 class="font-semibold mt-4 mb-2" style="font-family: 'Noto Sans KR', sans-serif;">다. 운영 모델 (협력)</h3>
                        <p class="preview-text" id="preview_idea_operation"><span class="preview-placeholder">내용을 입력하세요...</span></p>
                        <h2 class="report-section-title">IV. 기대 효과</h2>
                        <p class="preview-text" id="preview_effects"><span class="preview-placeholder">내용을 입력하세요...</span></p>
                        <h2 class="report-section-title">V. 정보 출처</h2>
                        <div class="preview-text" id="preview_sources"><span class="preview-placeholder">내용을 입력하세요...</span></div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <div id="toast-notification" class="fixed bottom-5 right-5 bg-gray-800 text-white py-3 px-5 rounded-lg shadow-lg opacity-0 transition-opacity duration-300 no-print">저장되었습니다!</div>

    <script type="module" src="./modules/session2-app.js"></script>
</body>
</html>

